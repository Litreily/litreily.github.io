<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="simple life"><meta name="theme-color" content="#2d4356"><meta name="baidu-site-verification" content="pte8o83UGG"><title>Pythonç½‘ç»œçˆ¬è™«5 - çˆ¬å–QQç©ºé—´ç›¸å†Œ | LITREILY</title><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.png"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script><script>var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?d55250b3059d32736607d30baa6e0ca2";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();</script></head><link rel="stylesheet" type="text/css" href="/plugins/prettify/doxy.css"><script type="text/javascript" src="/js/ready.js" async></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><body class="night"><div class="mobile-head" id="mobile-head"><div class="navbar-icon"><span></span><span></span><span></span></div><div class="navbar-title"><a href="/">LITREILY</a></div><div class="navbar-search"><!--= show a circle here--></div></div><div class="h-wrapper" id="menu"><nav class="h-head box"><div class="m-hdimg"><a class="hdimg img" href="/"><img class="nofancybox" src="/img/profile.jpg" width="128" height="128"></a><h1 class="ttl"><a href="/">LITREILY</a></h1></div><p class="m-desc">å¿ƒä¹‹æ‰€å‘ï¼Œæ— æƒ§æ— æ‚”,<br>æ„¿æ±‚ä»å¾—ä»ï¼Œå¤æ— æ€¨æ€¼ï¼</p><div class="m-nav"><ul><li><span class="dot">â—</span><a href="/archives/">å½’æ¡£</a></li><li><span class="dot">â—</span><a href="/categories/">åˆ†ç±»</a></li><li><span class="dot">â—</span><a href="/tags/">æ ‡ç­¾</a></li><li><span class="dot">â—</span><a href="/about/">å…³äº</a></li><li><span class="dot">â—</span><a href="/notes/">ç¬”è®°</a></li><li><span class="dot">â—</span><a href="/atom.xml">RSS</a></li><li class="m-sch"><form class="form" id="j-formsch" method="get"><input class="txt" type="text" id="local-search-input" name="q" value="æœç´¢" onfocus="if(this.value=='æœç´¢'){this.value='';}" onblur="if(this.value==''){this.value='æœç´¢';}"><input type="text" style="display:none;"></form></li></ul><div id="local-search-result"></div></div></nav></div><div id="back2Top"><a class="fa fa-arrow-up" title="Back to top" href="#"></a></div><div class="box" id="container"><div class="l-wrapper"><div class="l-content box"><div class="l-post l-post-art"><article class="p-art"><div class="p-header box"><h1 class="p-title">Pythonç½‘ç»œçˆ¬è™«5 - çˆ¬å–QQç©ºé—´ç›¸å†Œ</h1><div class="p-info"><span class="p-date"><i class="fa fa-calendar"></i><a href="/2019/03/03/qqzone/">2019-03-03</a></span><span class="p-category"><i class="fa fa-folder"></i><a href="/categories/Python/">Python</a></span><span class="p-view" id="busuanzi_container_page_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_page_pv"></span></span></div></div><div class="p-content"><p>è‡ªæ¯•ä¸šåï¼Œå°±å†ä¹Ÿæ²¡æœ‰ç”¨è¿‡QQï¼ŒQQç©ºé—´é‡Œè®°å½•çš„æ˜¯äº›å¹¶ä¸ç²¾å½©çš„é’è‘±å²æœˆï¼Œä½†å¥½æ­¹ä¹Ÿæ˜¯ä»½å›å¿†ï¼Œè¿‘æ—¥æƒ³ç€å­¦ä»¥è‡´ç”¨ï¼Œç”¨<code>Python</code>æŠŠQQç©ºé—´ç›¸å†Œçš„æ‰€æœ‰ç…§ç‰‡çˆ¬å–ä¸‹æ¥ï¼Œä»¥ä½œå¤‡ä»½ã€‚</p>
<h2 id="åˆ†æQQç©ºé—´"><a href="#åˆ†æQQç©ºé—´" class="headerlink" title="åˆ†æQQç©ºé—´"></a>åˆ†æQQç©ºé—´</h2><h3 id="ç™»å½•QQç©ºé—´"><a href="#ç™»å½•QQç©ºé—´" class="headerlink" title="ç™»å½•QQç©ºé—´"></a>ç™»å½•QQç©ºé—´</h3><p>çˆ¬å–ç¬¬ä¸€æ­¥ï¼Œåˆ†æç«™ç‚¹ï¼Œé¦–å…ˆéœ€è¦çŸ¥é“å¦‚ä½•ç™»å½•QQç©ºé—´ã€‚æœ€åˆæƒ³æ³•æ˜¯ç”¨<code>requests</code>åº“é…ç½®ç™»å½•è¯·æ±‚ï¼Œæ¨¡æ‹Ÿç™»å½•ï¼Œä½†æ˜¯ä¸ä¹…ä¾¿æ”¾å¼ƒäº†è¿™ä¸€æ€è·¯ï¼Œè¯·çœ‹ä¸‹å›¾â†“</p>
<p><img src="/assets/qqzone/login.png" alt="login"></p>
<p>æ ¹æ®ç™»å½•æŒ‰é’®ç»‘å®šçš„ç›‘å¬äº‹ä»¶å¯ä»¥è¿½è¸ªåˆ°è¯¥æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¦‚ä¸‹ï¼š</p>
<p><img src="/assets/qqzone/login_func.png" alt="login function"></p>
<p>è´¦å·åŠ å¯†æ˜¯å¿…ç„¶çš„ï¼Œä½†è¿™ä¸€å †å †çš„ä»£ç çœŸå¿ƒä¸å¥½è§£æï¼Œæœ‰è€å¿ƒçš„å‹‡å£«å°½æƒ…ä¸€è¯•ï¼</p>
<p>åœ¨æ’é™¤è¿™ç§ç™»å½•æ–¹æ³•åï¼Œé€‰æ‹©<code>selenium</code>æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•ä¸å¤±ä¸ºçœæ—¶çœåŠ›çš„æ–¹æ³•ï¼Œè€Œä¸”æˆ‘ä»¬åªæ˜¯éœ€è¦é€šè¿‡<code>selenium</code>å®Œæˆç™»å½•ï¼Œè·å–åˆ°<code>Cookies</code>å’Œåé¢è®²è¿°çš„<code>g_tk</code>å‚æ•°åï¼Œå°±å¯ä»¥åœç”¨äº†ï¼Œæ‰€ä»¥æ•ˆç‡å¹¶ä¸å¤ªä½ã€‚</p>
<h3 id="åˆ†æç©ºé—´ç›¸å†Œ"><a href="#åˆ†æç©ºé—´ç›¸å†Œ" class="headerlink" title="åˆ†æç©ºé—´ç›¸å†Œ"></a>åˆ†æç©ºé—´ç›¸å†Œ</h3><p>ç™»å½•ä»¥åï¼Œé¡µé¢ä¼šè·³è½¬è‡³ <a href="javascript:;" target="_blank" rel="noopener">https://user.qzone.qq.com/{QQ_NUMBER}</a>, è¿™æ—¶æŠŠé¼ æ ‡ç§»åˆ°å¯¼èˆªæ ä½ ä¼šå‘ç°ï¼Œæ‰€æœ‰çš„å¯¼èˆªæ é“¾æ¥éƒ½æ˜¯<code>javascript:;</code> ğŸ˜³ã€‚æ²¡é”™å°±æ˜¯è¿™ä¹ˆå‘ï¼Œä¸€åˆ‡éƒ½æ˜¯æš—ç®±æ“ä½œã€‚</p>
<p>å½“ç„¶è¿™å¹¶ä¸éš¾å¤„ç†ï¼Œä½¿ç”¨è°ƒè¯•å·¥å…·æ•è·ç‚¹å‡»åäº§ç”Ÿçš„è¯·æ±‚ï¼Œç„¶åè¿‡æ»¤å‡ºæ­£ç¡®çš„è¯·æ±‚åŒ…å³å¯ã€‚å› ä¸ºç½‘ç»œåŒ…éå¸¸å¤šï¼Œé‚£ä¹ˆæ€ä¹ˆè¿‡æ»¤å‘¢ï¼ŒçŒœæƒ³ç›¸å†Œæ•°æ®çš„APIå¿…ç„¶ä¼šè¿”å›ä¸ªåˆ—è¡¨<code>list</code>ï¼Œå°è¯•è¿‡æ»¤<code>list</code>ç„¶åé€ä¸ªæ’é™¤ï¼Œæœ€åå®šä½åˆ°è¯·æ±‚åŒ…ã€‚ä¸‹é¢æ˜¯é€šè¿‡<code>fcg_list</code>è¿‡æ»¤åçš„æ•°æ®åŒ…ï¼Œåˆ—è¡¨ä¿¡æ¯ä»¥<code>jsonp</code>æ ¼å¼è¿”å›ï¼Œç¨ä½œå¤„ç†å³å¯å½“åš<code>json</code>æ ¼å¼æ¥è¯»å–ï¼ˆåé¢æœ‰è®²ï¼‰ã€‚</p>
<p><img src="/assets/qqzone/album_list.png" alt="album list"></p>
<p>ä»<code>Headers</code>å’Œ<code>Response</code>å¯ä»¥åˆ†åˆ«è·å–åˆ°ä¸¤ç»„<strong>é‡è¦</strong>ä¿¡æ¯ï¼š</p>
<ol>
<li><code>request</code> è·å–ç›¸å†Œåˆ—è¡¨æ‰€éœ€çš„è¯·æ±‚ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¯·æ±‚é“¾æ¥å’Œå‚æ•°</li>
<li><code>response</code> æ•°æ®åŒ…åŒ…å«çš„æ‰€æœ‰ç›¸å†Œçš„ä¿¡æ¯ï¼Œæ˜¯æ¯ä¸ªç›¸å†Œæ‰€å«ç…§ç‰‡å¯¹åº”çš„è¯·æ±‚åŒ…å‚æ•°çš„æ•°æ®æ¥æº</li>
</ol>
<p>å…ˆçœ‹è¯·æ±‚åŒ…ï¼š</p>
<pre><code class="yml"># url
https://h5.qzone.qq.com/proxy/domain/photo.qzone.qq.com/fcgi-bin/fcg_list_album_v3

# args
g_tk: 477819917
callback: shine0_Callback
t: 691481346
hostUin: 123456789
uin: 123456789
appid: 4
inCharset: utf-8
outCharset: utf-8
source: qzone
plat: qzone
format: jsonp
notice: 0
filter: 1
handset: 4
pageNumModeSort: 40
pageNumModeClass: 15
needUserInfo: 1
idcNum: 4
callbackFun: shine0
_: 1551788226819
</code></pre>
<p>å…¶ä¸­<code>hostUin</code>, <code>uin</code>éƒ½æ˜¯QQå·ï¼Œ<code>g_tk</code>æ˜¯å¿…é¡»çš„ä¸”æ¯æ¬¡é‡æ–°ç™»å½•éƒ½ä¼šæ›´æ–°ï¼ˆåé¢æœ‰è®²å¦‚ä½•è·å–ï¼‰ï¼Œå…¶å®ƒæœ‰äº›å‚æ•°ä¸æ˜¯å¿…é¡»çš„ï¼Œæˆ‘å°è¯•åæ•´ç†å‡ºå¦‚ä¸‹è¯·æ±‚å‚æ•°ï¼š</p>
<pre><code class="python">query = {
    &#39;g_tk&#39;: self.g_tk,
    &#39;hostUin&#39;: self.username,
    &#39;uin&#39;: self.username,
    &#39;appid&#39;: 4,
    &#39;inCharset&#39;: &#39;utf-8&#39;,
    &#39;outCharset&#39;: &#39;utf-8&#39;,
    &#39;source&#39;: &#39;qzone&#39;,
    &#39;plat&#39;: &#39;qzone&#39;,
    &#39;format&#39;: &#39;jsonp&#39;
}
</code></pre>
<p>æ¥ä¸‹æ¥çœ‹<code>jsonp</code>æ ¼å¼çš„è·¨åŸŸå“åº”åŒ…ï¼š</p>
<pre><code class="json">shine0_Callback({
    &quot;code&quot;:0,
    &quot;subcode&quot;:0,
    &quot;message&quot;:&quot;&quot;,
    &quot;default&quot;:0,
    &quot;data&quot;:
{
   &quot;albumListModeSort&quot; : [
      {
         &quot;allowAccess&quot; : 1,
         &quot;anonymity&quot; : 0,
         &quot;bitmap&quot; : &quot;10000000&quot;,
         &quot;classid&quot; : 106,
         &quot;comment&quot; : 11,
         &quot;createtime&quot; : 1402661881,
         &quot;desc&quot; : &quot;&quot;,
         &quot;handset&quot; : 0,
         &quot;id&quot; : &quot;V13LmPKk0JLNRY&quot;,
         &quot;lastuploadtime&quot; : 1402662103,
         &quot;modifytime&quot; : 1408271987,
         &quot;name&quot; : &quot;æ¯•ä¸šå­£&quot;,
         &quot;order&quot; : 0,
         &quot;pre&quot; : &quot;http:\/\/b171.photo.store.qq.com\/psb?\/V13LmPKk0JLNRY\/eSAslg*mYWaytEtLysg*Q*5Km91gIWfGuwSk58K2rQY!\/a\/dIY29GUbJgAA&quot;,
         &quot;priv&quot; : 1,
         &quot;pypriv&quot; : 1,
         &quot;total&quot; : 4,
         &quot;viewtype&quot; : 0
      },
</code></pre>
<p>shine0_Callbackæ˜¯è¯·æ±‚åŒ…çš„<code>callbackFun</code>å‚æ•°å†³å®šçš„ï¼Œå¦‚æœæ²¡è¿™ä¸ªå‚æ•°ï¼Œå“åº”åŒ…ä¼šä»¥<code>_Callback</code>ä½œä¸ºé»˜è®¤åï¼Œå½“ç„¶è¿™éƒ½ä¸é‡è¦ã€‚æ‰€æœ‰ç›¸å†Œä¿¡æ¯ä»¥<code>json</code>æ ¼å¼å­˜å…¥<code>albumListModeSort</code>ä¸­ï¼Œä¸Šé¢ä»…æˆªå–äº†ä¸€ä¸ªç›¸å†Œçš„ä¿¡æ¯ã€‚</p>
<p>ç›¸å†Œä¿¡æ¯ä¸­ï¼Œ<code>name</code>ä»£è¡¨ç›¸å†Œåç§°ï¼Œ<code>id</code>ä½œä¸ºå”¯ä¸€æ ‡è¯†å¯ç”¨äºè¯·æ±‚è¯¥ç›¸å†Œå†…çš„ç…§ç‰‡ä¿¡æ¯ï¼Œè€Œ<code>pre</code>ä»…ä»…æ˜¯ä¸€ä¸ªé¢„è§ˆç¼©ç•¥å›¾çš„é“¾æ¥ï¼Œæ— å…³ç´§è¦ã€‚</p>
<h3 id="åˆ†æå•ä¸ªç›¸å†Œ"><a href="#åˆ†æå•ä¸ªç›¸å†Œ" class="headerlink" title="åˆ†æå•ä¸ªç›¸å†Œ"></a>åˆ†æå•ä¸ªç›¸å†Œ</h3><p>ä¸è·å–ç›¸å†Œä¿¡æ¯ç±»ä¼¼ï¼Œè¿›å…¥æŸä¸€ç›¸å†Œï¼Œä½¿ç”¨<code>cgi_list</code>è¿‡æ»¤æ•°æ®åŒ…ï¼Œæ‰¾åˆ°è¯¥ç›¸å†Œçš„ç…§ç‰‡ä¿¡æ¯</p>
<p><img src="/assets/qqzone/photo_list.png" alt="photo list"></p>
<p>åŒæ ·çš„é“ç†ï¼Œæ ¹æ®æ•°æ®åŒ…å¯ä»¥è·å–ç…§ç‰‡åˆ—è¡¨ä¿¡æ¯çš„è¯·æ±‚åŒ…å’Œå“åº”ä¿¡æ¯ï¼Œå…ˆçœ‹è¯·æ±‚ï¼š</p>
<pre><code class="yml"># url
https://h5.qzone.qq.com/proxy/domain/photo.qzone.qq.com/fcgi-bin/cgi_list_photo

# args
g_tk: 477819917
callback: shine0_Callback
t: 952444063
mode: 0
idcNum: 4
hostUin: 123456789
topicId: V13LmPKk0JLNRY
noTopic: 0
uin: 123456789
pageStart: 0
pageNum: 30
skipCmtCount: 0
singleurl: 1
batchId:
notice: 0
appid: 4
inCharset: utf-8
outCharset: utf-8
source: qzone
plat: qzone
outstyle: json
format: jsonp
json_esc: 1
question:
answer:
callbackFun: shine0
_: 1551790719497
</code></pre>
<p>å…¶ä¸­æœ‰å‡ ä¸ªå…³é”®å‚æ•°ï¼š</p>
<ol>
<li><code>g_tk</code> - ä¸ç›¸å†Œåˆ—è¡¨å‚æ•°ä¸€è‡´</li>
<li><code>topicId</code> - ä¸ç›¸å†Œåˆ—è¡¨å‚æ•°ä¸­çš„<code>id</code>ä¸€è‡´</li>
<li><code>pageStart</code> - æœ¬æ¬¡è¯·æ±‚ç…§ç‰‡çš„èµ·å§‹ç¼–å·</li>
<li><code>pageNum</code> - æœ¬æ¬¡è¯·æ±‚çš„ç…§ç‰‡æ•°é‡</li>
</ol>
<blockquote>
<p>ä¸ºäº†ä¸€æ¬¡æ€§è·å–æ‰€æœ‰ç…§ç‰‡ï¼Œå¯ä»¥å°†<code>pageStart</code>è®¾ä¸º0ï¼Œ<code>pageNum</code>è®¾ä¸ºæ‰€æœ‰ç›¸å†Œæ‰€å«ç…§ç‰‡çš„æœ€å¤§å€¼ã€‚</p>
</blockquote>
<p>åŒæ ·å¯ä»¥å¯¹ä¸Šé¢çš„å‚æ•°è¿›è¡Œç®€åŒ–ï¼Œåœ¨ç›¸å†Œåˆ—è¡¨è¯·æ±‚å‚æ•°çš„åŸºç¡€ä¸Šæ·»åŠ <code>topicId</code>ï¼Œ<code>pageStart</code>å’Œ<code>pageNum</code>ä¸‰ä¸ªå‚æ•°å³å¯ã€‚</p>
<p>ä¸‹é¢æ¥çœ‹è¿”å›çš„ç…§ç‰‡åˆ—è¡¨ä¿¡æ¯ï¼š</p>
<pre><code class="json">shine0_Callback({
    &quot;code&quot;:0,
    &quot;subcode&quot;:0,
    &quot;message&quot;:&quot;&quot;,
    &quot;default&quot;:0,
    &quot;data&quot;:
{
   &quot;limit&quot; : 0,
   &quot;photoList&quot; : [
      {
         &quot;batchId&quot; : &quot;1402662093402000&quot;,
         &quot;browser&quot; : 0,
         &quot;cameratype&quot; : &quot; &quot;,
         &quot;cp_flag&quot; : false,
         &quot;cp_x&quot; : 455,
         &quot;cp_y&quot; : 388,
         &quot;desc&quot; : &quot;&quot;,
         &quot;exif&quot; : {
            &quot;exposureCompensation&quot; : &quot;&quot;,
            &quot;exposureMode&quot; : &quot;&quot;,
            &quot;exposureProgram&quot; : &quot;&quot;,
            &quot;exposureTime&quot; : &quot;&quot;,
            &quot;flash&quot; : &quot;&quot;,
            &quot;fnumber&quot; : &quot;&quot;,
            &quot;focalLength&quot; : &quot;&quot;,
            &quot;iso&quot; : &quot;&quot;,
            &quot;lensModel&quot; : &quot;&quot;,
            &quot;make&quot; : &quot;&quot;,
            &quot;meteringMode&quot; : &quot;&quot;,
            &quot;model&quot; : &quot;&quot;,
            &quot;originalTime&quot; : &quot;&quot;
         },
         &quot;forum&quot; : 0,
         &quot;frameno&quot; : 0,
         &quot;height&quot; : 621,
         &quot;id&quot; : 0,
         &quot;is_video&quot; : false,
         &quot;is_weixin_mode&quot; : 0,
         &quot;ismultiup&quot; : 0,
         &quot;lloc&quot; : &quot;NDN0sggyKs3smlOg6eYghjb0ZRsmAAA!&quot;,
         &quot;modifytime&quot; : 1402661792,
         &quot;name&quot; : &quot;QQå›¾ç‰‡20140612104616&quot;,
         &quot;origin&quot; : 0,
         &quot;origin_upload&quot; : 0,
         &quot;origin_url&quot; : &quot;&quot;,
         &quot;owner&quot; : &quot;123456789&quot;,
         &quot;ownername&quot; : &quot;123456789&quot;,
         &quot;photocubage&quot; : 91602,
         &quot;phototype&quot; : 1,
         &quot;picmark_flag&quot; : 0,
         &quot;picrefer&quot; : 1,
         &quot;platformId&quot; : 0,
         &quot;platformSubId&quot; : 0,
         &quot;poiName&quot; : &quot;&quot;,
         &quot;pre&quot; : &quot;http:\/\/b171.photo.store.qq.com\/psb?\/V13LmPKk0JLNRY\/eSAslg*mYWaytEtLysg*Q*5Km91gIWfSk58K2rQY!\/a\/dIY29GUbJgAA&amp;bo=pANtAgAAAAABCeY!&quot;,
         &quot;raw&quot; : &quot;http:\/\/r.photo.store.qq.com\/psb?\/V13LmPKk0JLNRY\/eSAslg*mYWaytEtLysg*Q*5Km91gIWfSk58K2rQY!\/r\/dIY29GUbJgAA&quot;,
         &quot;raw_upload&quot; : 1,
         &quot;rawshoottime&quot; : 0,
         &quot;shoottime&quot; : 0,
         &quot;shorturl&quot; : &quot;&quot;,
         &quot;sloc&quot; : &quot;NDN0sggyKs3smlOg6eYghjb0ZRsmAAA!&quot;,
         &quot;tag&quot; : &quot;&quot;,
         &quot;uploadtime&quot; : &quot;2014-06-13 20:21:33&quot;,
         &quot;url&quot; : &quot;http:\/\/b171.photo.store.qq.com\/psb?\/V13LmPKk0JLNRY\/eSAslg*mYWaytEtLysg*Q*5Km91gIWfSk58K2rQY!\/b\/dIY29GUbJgAA&amp;bo=pANtAgAAAAABCeY!&quot;,
         &quot;width&quot; : 932,
         &quot;yurl&quot; : 0
      },
      // ...
   ]
   &quot;t&quot; : &quot;952444063&quot;,
   &quot;topic&quot; : {
      &quot;bitmap&quot; : &quot;10000000&quot;,
      &quot;browser&quot; : 0,
      &quot;classid&quot; : 106,
      &quot;comment&quot; : 1,
      &quot;cover_id&quot; : &quot;NDN0sggyKs3smlOg6eYghjb0ZRsmAAA!&quot;,
      &quot;createtime&quot; : 1402661881,
      &quot;desc&quot; : &quot;&quot;,
      &quot;handset&quot; : 0,
      &quot;id&quot; : &quot;V13LmPKk0JLNRY&quot;,
      &quot;is_share_album&quot; : 0,
      &quot;lastuploadtime&quot; : 1402662103,
      &quot;modifytime&quot; : 1408271987,
      &quot;name&quot; : &quot;æ¯•ä¸šå­£&quot;,
      &quot;ownerName&quot; : &quot;707922098&quot;,
      &quot;ownerUin&quot; : &quot;707922098&quot;,
      &quot;pre&quot; : &quot;http:\/\/b171.photo.store.qq.com\/psb?\/V13LmPKk0JLNRY\/eSAslg*mYWaytEtLysg*Q*5Km91gIWfGuwSk58K2rQY!\/a\/dIY29GUbJgAA&quot;,
      &quot;priv&quot; : 1,
      &quot;pypriv&quot; : 1,
      &quot;share_album_owner&quot; : 0,
      &quot;total&quot; : 4,
      &quot;url&quot; : &quot;http:\/\/b171.photo.store.qq.com\/psb?\/V13LmPKk0JLNRY\/eSAslg*mYWaytEtLysg*Q*5Km91gIWfGuwSk58K2rQY!\/b\/dIY29GUbJgAA&quot;,
      &quot;viewtype&quot; : 0
   },
   &quot;totalInAlbum&quot; : 4,
   &quot;totalInPage&quot; : 4
}
</code></pre>
<p>è¿”å›çš„ç…§ç‰‡ä¿¡æ¯éƒ½å­˜äº<code>photoList</code>, ä¸Šé¢åŒæ ·åªæˆªå–äº†ä¸€å¼ ç…§ç‰‡çš„ä¿¡æ¯ï¼Œåé¢ä¸€éƒ¨åˆ†è¿”å›çš„æ˜¯å½“å‰ç›¸å†Œçš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ã€‚<code>totalInAlbum</code>ï¼Œ <code>totalInPage</code>å­˜å‚¨äº†å½“å‰ç›¸å†Œæ€»å…±åŒ…å«çš„ç…§ç‰‡æ•°åŠæœ¬æ¬¡è¿”å›çš„ç…§ç‰‡æ•°ã€‚è€Œæˆ‘ä»¬éœ€è¦ä¸‹è½½çš„å›¾ç‰‡é“¾æ¥åˆ™æ˜¯<code>url</code>ï¼</p>
<p>OK, åˆ°æ­¤ï¼Œæ‰€æœ‰è¯·æ±‚å’Œå“åº”æ•°æ®éƒ½åˆ†ææ¸…æ¥šäº†ï¼Œæ¥ä¸‹æ¥ä¾¿æ˜¯<code>coding</code>çš„æ—¶å€™äº†ã€‚</p>
<h2 id="ç¡®å®šçˆ¬å–æ–¹æ¡ˆ"><a href="#ç¡®å®šçˆ¬å–æ–¹æ¡ˆ" class="headerlink" title="ç¡®å®šçˆ¬å–æ–¹æ¡ˆ"></a>ç¡®å®šçˆ¬å–æ–¹æ¡ˆ</h2><ol>
<li>åˆ›å»º<code>qqzone</code>ç±»ï¼Œåˆå§‹åŒ–ç”¨æˆ·ä¿¡æ¯</li>
<li>ä½¿ç”¨<code>Selenium</code>æ¨¡æ‹Ÿç™»å½•</li>
<li>è·å–<code>Cookies</code>å’Œ<code>g_tk</code></li>
<li>ä½¿ç”¨<code>requests</code>è·å–ç›¸å†Œåˆ—è¡¨ä¿¡æ¯</li>
<li>éå†ç›¸å†Œï¼Œè·å–ç…§ç‰‡åˆ—è¡¨ä¿¡æ¯å¹¶ä¸‹è½½ç…§ç‰‡</li>
</ol>
<h3 id="åˆ›å»ºqqzoneç±»"><a href="#åˆ›å»ºqqzoneç±»" class="headerlink" title="åˆ›å»ºqqzoneç±»"></a>åˆ›å»ºqqzoneç±»</h3><pre><code class="python">class qqzone(object):
    &quot;&quot;&quot;QQç©ºé—´ç›¸å†Œçˆ¬è™«&quot;&quot;&quot;
    def __init__(self, user):
        self.username = user[&#39;username&#39;]
        self.password = user[&#39;password&#39;]
</code></pre>
<h3 id="æ¨¡æ‹Ÿç™»å½•"><a href="#æ¨¡æ‹Ÿç™»å½•" class="headerlink" title="æ¨¡æ‹Ÿç™»å½•"></a>æ¨¡æ‹Ÿç™»å½•</h3><pre><code class="python">from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.common.exceptions import WebDriverExceptio

# ...

def _login_and_get_args(self):
    &quot;&quot;&quot;ç™»å½•QQï¼Œè·å–Cookieså’Œg_tk&quot;&quot;&quot;
    opt = webdriver.ChromeOptions()
    opt.set_headless()

    driver = webdriver.Chrome(chrome_options=opt)
    driver.get(&#39;https://i.qq.com/&#39;)
    # time.sleep(2)

    logging.info(&#39;User {} login...&#39;.format(self.username))
    driver.switch_to.frame(&#39;login_frame&#39;)
    driver.find_element_by_id(&#39;switcher_plogin&#39;).click()
    driver.find_element_by_id(&#39;u&#39;).clear()
    driver.find_element_by_id(&#39;u&#39;).send_keys(self.username)
    driver.find_element_by_id(&#39;p&#39;).clear()
    driver.find_element_by_id(&#39;p&#39;).send_keys(self.password)
    driver.find_element_by_id(&#39;login_button&#39;).click()

    time.sleep(1)
    driver.get(&#39;https://user.qzone.qq.com/{}&#39;.format(self.username))
</code></pre>
<p>æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>selenium</code>éœ€è¦å®‰è£…å¯¹åº”çš„<code>webdriver</code></li>
<li>å¯ä»¥é€šè¿‡<code>webdriver.Chrome()</code>æŒ‡å®šæµè§ˆå™¨ä½ç½®ï¼Œå¦åˆ™é»˜è®¤ä»ç¯å¢ƒå˜é‡å®šä¹‰çš„è·¯å¾„æŸ¥æ‰¾</li>
<li>å¦‚æœç”µè„‘æ‰“å¼€æµè§ˆå™¨è¾ƒæ…¢ï¼Œå¯èƒ½éœ€è¦åœ¨<code>driver.get</code>å<code>sleep</code>å‡ ç§’</li>
</ol>
<h3 id="è·å–-Cookies"><a href="#è·å–-Cookies" class="headerlink" title="è·å– Cookies"></a>è·å– Cookies</h3><p>ä½¿ç”¨<code>selenium</code>è·å–<code>Cookies</code>éå¸¸æ–¹ä¾¿</p>
<pre><code class="python">self.cookies = driver.get_cookies()
</code></pre>
<h3 id="è·å–-g-tk"><a href="#è·å–-g-tk" class="headerlink" title="è·å– g_tk"></a>è·å– g_tk</h3><p>è·å–<code>g_tk</code>æœ€å¼€å§‹å¯ä»¥è¯´æ˜¯æœ¬çˆ¬è™«æœ€å¤§çš„éš¾ç‚¹ï¼Œå› ä¸ºä»ç½‘é¡µä¸­æ ¹æœ¬æ‰¾ä¸åˆ°ç›´æ¥å†™æ˜çš„æ•°å€¼ï¼Œåªæœ‰å„ç§å‡½æ•°è°ƒç”¨ã€‚ä¸ºæ­¤æˆ‘å…¨å±€æœç´¢ï¼Œå‘ç°å¥½å¤šåœ°æ–¹éƒ½æœ‰å…¶è·å–æ–¹å¼ã€‚</p>
<p><img src="/assets/qqzone/g_tk.png" alt="g_tk"></p>
<p>æœ€åé€‰æ‹©äº†å…¶ä¸­ä¸€å¤„ï¼Œé€šè¿‡<code>selenium</code>æ‰§è¡Œè„šæœ¬çš„åŠŸèƒ½æˆåŠŸè·å–åˆ°äº†<code>g_tk</code>ï¼</p>
<pre><code class="python">self.g_tk = driver.execute_script(&#39;return QZONE.FP.getACSRFToken()&#39;)
</code></pre>
<p>åˆ°æ­¤ï¼Œ<code>selenium</code>çš„ä½¿å‘½å°±å®Œæˆäº†ï¼Œå‰©ä¸‹çš„å°†é€šè¿‡<code>requests</code>æ¥å®Œæˆã€‚</p>
<h3 id="åˆå§‹åŒ–-request-Session"><a href="#åˆå§‹åŒ–-request-Session" class="headerlink" title="åˆå§‹åŒ– request.Session"></a>åˆå§‹åŒ– request.Session</h3><p>æ¥ä¸‹æ¥éœ€è¦é€æ­¥ç”Ÿæˆè¯·æ±‚ç„¶åè·å–æ•°æ®ã€‚ä½†æ˜¯ä¸ºæ–¹ä¾¿èµ·è§ï¼Œè¿™é‡Œä½¿ç”¨ä¼šè¯çš„æ–¹å¼è¯·æ±‚æ•°æ®ï¼Œé…ç½®å¥½<code>cookie</code>å’Œ<code>headers</code>ï¼Œçœçš„æ¯æ¬¡è¯·æ±‚éƒ½è®¾ç½®ä¸€éã€‚</p>
<pre><code class="python">def _init_session(self):
    self.session = requests.Session()
    for cookie in self.cookies:
        self.session.cookies.set(cookie[&#39;name&#39;], cookie[&#39;value&#39;])
    self.session.headers = {
        &#39;Referer&#39;: &#39;https://qzs.qq.com/qzone/photo/v7/page/photo.html?init=photo.v7/module/albumList/index&amp;navBar=1&#39;,
        &#39;User-Agent&#39;: &#39;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.109 Safari/537.36&#39;
    }
</code></pre>
<h3 id="è¯·æ±‚ç›¸å†Œä¿¡æ¯"><a href="#è¯·æ±‚ç›¸å†Œä¿¡æ¯" class="headerlink" title="è¯·æ±‚ç›¸å†Œä¿¡æ¯"></a>è¯·æ±‚ç›¸å†Œä¿¡æ¯</h3><p>è·å–ç›¸å†Œä¿¡æ¯ï¼Œéœ€è¦å…ˆå°è£…å¥½è¯·æ±‚å‚æ•°ï¼Œç„¶åé€šè¿‡<code>session.get</code>çˆ¬å–æ•°æ®ï¼Œå†é€šè¿‡æ­£åˆ™åŒ¹é…ä»¥<code>json</code>æ ¼å¼è¯»å–<code>jsonp</code>æ•°æ®ï¼Œæœ€åè§£ææ‰€éœ€çš„<code>name</code>å’Œ<code>id</code>ã€‚</p>
<pre><code class="python">def _get_ablum_list(self):
    &quot;&quot;&quot;è·å–ç›¸å†Œçš„åˆ—è¡¨ä¿¡æ¯&quot;&quot;&quot;
    album_url = &#39;{}{}&#39;.format(
        &#39;https://h5.qzone.qq.com/proxy/domain/photo.qzone.qq.com/fcgi-bin/fcg_list_album_v3?&#39;,
        self._get_query_for_request())

    logging.info(&#39;Getting ablum list id...&#39;)
    resp = self.session.get(album_url)
    data = self._load_callback_data(resp)

    album_list = {}
    for item in data[&#39;data&#39;][&#39;albumListModeSort&#39;]:
        album_list[item[&#39;name&#39;]] = item[&#39;id&#39;]

    return album_list
</code></pre>
<p>å…¶ä¸­çš„å‚æ•°ç»„åˆæ¥è‡ªä¸‹é¢çš„å‡½æ•°<code>_get_query_for_request</code>å‡½æ•°ã€‚</p>
<pre><code class="python">def _get_query_for_request(self, topicId=None, pageStart=0, pageNum=100):
    &quot;&quot;&quot;è·å–è¯·æ±‚ç›¸å†Œä¿¡æ¯æˆ–ç…§ç‰‡ä¿¡æ¯æ‰€éœ€çš„å‚æ•°

    Args:
        topicId: æ¯ä¸ªç›¸å†Œå¯¹åº”çš„å”¯ä¸€æ ‡è¯†ç¬¦
        pageStart: è¯·æ±‚æŸä¸ªç›¸å†Œçš„ç…§ç‰‡åˆ—è¡¨ä¿¡æ¯æ‰€éœ€çš„èµ·å§‹é¡µç 
        pageNum: å•æ¬¡è¯·æ±‚æŸä¸ªç›¸å†Œçš„ç…§ç‰‡æ•°é‡

    Returns:
        ä¸€ä¸ªç»„åˆå¥½æ‰€æœ‰è¯·æ±‚å‚æ•°çš„å­—ç¬¦ä¸²
    &quot;&quot;&quot;
    query = {
        &#39;g_tk&#39;: self.g_tk,
        &#39;hostUin&#39;: self.username,
        &#39;uin&#39;: self.username,
        &#39;appid&#39;: 4,
        &#39;inCharset&#39;: &#39;utf-8&#39;,
        &#39;outCharset&#39;: &#39;utf-8&#39;,
        &#39;source&#39;: &#39;qzone&#39;,
        &#39;plat&#39;: &#39;qzone&#39;,
        &#39;format&#39;: &#39;jsonp&#39;
    }
    if topicId:
        query[&#39;topicId&#39;] = topicId
        query[&#39;pageStart&#39;] = pageStart
        query[&#39;pageNum&#39;] = pageNum
    return &#39;&amp;&#39;.join(&#39;{}={}&#39;.format(key, val) for key, val in query.items())
</code></pre>
<p>å…¶ä¸­çš„<code>jsonp</code>è§£æå‡½æ•°å¦‚ä¸‹ï¼Œä¸»ä½“éƒ¨åˆ†å°±æ˜¯ä¸€ä¸ªæ­£åˆ™åŒ¹é…ï¼Œéå¸¸ç®€å•ã€‚</p>
<pre><code class="Python">def _load_callback_data(self, resp):
    &quot;&quot;&quot;ä»¥jsonæ ¼å¼è§£æè¿”å›çš„jsonpæ•°æ®&quot;&quot;&quot;
    try:
        resp.encoding = &#39;utf-8&#39;
        data = loads(re.search(r&#39;.*?\(({.*}).*?\).*&#39;, resp.text, re.S)[1])
        return data
    except ValueError:
        logging.error(&#39;Invalid input&#39;)
</code></pre>
<h3 id="è§£æå¹¶ä¸‹è½½ç…§ç‰‡"><a href="#è§£æå¹¶ä¸‹è½½ç…§ç‰‡" class="headerlink" title="è§£æå¹¶ä¸‹è½½ç…§ç‰‡"></a>è§£æå¹¶ä¸‹è½½ç…§ç‰‡</h3><p>è·å–ç›¸å†Œåˆ—è¡¨åï¼Œé€ä¸ªè¯·æ±‚ç…§ç‰‡åˆ—è¡¨ä¿¡æ¯ï¼Œè¿›è€Œé€ä¸€ä¸‹è½½</p>
<pre><code class="python">def _get_photo(self, album_name, album_id):
    &quot;&quot;&quot;è·å–å•ä¸ªç›¸å†Œçš„ç…§ç‰‡åˆ—è¡¨ä¿¡æ¯ï¼Œå¹¶ä¸‹è½½è¯¥ç›¸å†Œæ‰€æœ‰ç…§ç‰‡&quot;&quot;&quot;
    photo_list_url = &#39;{}{}&#39;.format(
        &#39;https://h5.qzone.qq.com/proxy/domain/photo.qzone.qq.com/fcgi-bin/cgi_list_photo?&#39;,
        self._get_query_for_request(topicId=album_id))

    logging.info(&#39;Getting photo list for album {}...&#39;.format(album_name))
    resp = self.session.get(photo_list_url)
    data = self._load_callback_data(resp)
    if data[&#39;data&#39;][&#39;totalInPage&#39;] == 0:
        return None

    file_dir = self.get_path(album_name)
    for item in data[&#39;data&#39;][&#39;photoList&#39;]:
        path = &#39;{}/{}.jpg&#39;.format(file_dir, item[&#39;name&#39;])
        logging.info(&#39;Downloading {}-{}&#39;.format(album_name, item[&#39;name&#39;]))
        self._download_image(item[&#39;url&#39;], path)
</code></pre>
<p>ä¸‹è½½å›¾ç‰‡ä¹Ÿæ˜¯é€šè¿‡<code>request</code>,è®°å¾—è®¾ç½®è¶…æ—¶æ—¶é—´ã€‚</p>
<pre><code class="python">def _download_image(self, url, path):
    &quot;&quot;&quot;ä¸‹è½½å•å¼ ç…§ç‰‡&quot;&quot;&quot;
    try:
        resp = self.session.get(url, timeout=15)
        if resp.status_code == 200:
            open(path, &#39;wb&#39;).write(resp.content)
    except requests.exceptions.Timeout:
        logging.warning(&#39;get {} timeout&#39;.format(url))
    except requests.exceptions.ConnectionError as e:
        logging.error(e.__str__)
    finally:
        pass
</code></pre>
<h2 id="çˆ¬å–æµ‹è¯•"><a href="#çˆ¬å–æµ‹è¯•" class="headerlink" title="çˆ¬å–æµ‹è¯•"></a>çˆ¬å–æµ‹è¯•</h2><ul>
<li>çˆ¬å–è¿‡ç¨‹</li>
</ul>
<p><img src="/assets/qqzone/downloading.png" alt="capturing"></p>
<ul>
<li>çˆ¬å–ç»“æœ</li>
</ul>
<p><img src="/assets/qqzone/downloaded_photos.png" alt="downloaded photos"></p>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><ol>
<li>å¦‚æœå°†è¯·æ±‚å‚æ•°ä¸­çš„<code>format</code>ç”±<code>jsonp</code>æ”¹æˆ<code>json</code>ï¼Œåˆ™å¯ä»¥ç›´æ¥è·å–<code>json</code>æ•°æ®</li>
<li>æœ¬ç”¨ä¾‹å¹¶æœªä½¿ç”¨å¤šè¿›ç¨‹æˆ–å¤šçº¿ç¨‹ï¼Œæ‰€ä»¥é€Ÿç‡ä¸ç®—å¿«ï¼Œè¿˜æœ‰å¾…ä¼˜åŒ–çš„åœ°æ–¹</li>
<li>è¯¥çˆ¬è™«å·²å­˜æ”¾è‡³å¼€æºé¡¹ç›®<a href="https://github.com/Litreily/capturer" target="_blank" rel="noopener">Github capturer</a>ï¼Œæ¬¢è¿äº¤æµ</li>
</ol>
</div><div class="p-copyright"><blockquote><div class="p-copyright-author"><span class="p-copyright-key">æœ¬æ–‡ä½œè€…ï¼š</span><span class="p-copytight-value"><a href="mailto:litreily@163.com">litreily</a></span></div><div class="p-copyright-link"><span class="p-copyright-key">æœ¬æ–‡é“¾æ¥ï¼š</span><span class="p-copytight-value"><a href="/2019/03/03/qqzone/">https://www.litreily.top/2019/03/03/qqzone/</a></span></div><div class="p-copyright-note"><span class="p-copyright-key">ç‰ˆæƒå£°æ˜ï¼š</span><span class="p-copytight-value">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹æ®Šå£°æ˜å¤–ï¼Œå‡é‡‡ç”¨<a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/"> CC BY-NC 4.0 </a>è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ <a href="https://www.litreily.top">litreilyçš„åšå®¢</a>ï¼</span></div></blockquote></div></article><div class="p-info box"><span class="p-tags"><i class="fa fa-tags"></i><a href="/tags/spider/">spider</a><a href="/tags/qqzone/">qqzone</a></span></div><aside id="toc"><div class="toc-title">ç›®å½•</div><nav><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#åˆ†æQQç©ºé—´"><span class="toc-number">1.</span> <span class="toc-text">åˆ†æQQç©ºé—´</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ç™»å½•QQç©ºé—´"><span class="toc-number">1.1.</span> <span class="toc-text">ç™»å½•QQç©ºé—´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åˆ†æç©ºé—´ç›¸å†Œ"><span class="toc-number">1.2.</span> <span class="toc-text">åˆ†æç©ºé—´ç›¸å†Œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åˆ†æå•ä¸ªç›¸å†Œ"><span class="toc-number">1.3.</span> <span class="toc-text">åˆ†æå•ä¸ªç›¸å†Œ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç¡®å®šçˆ¬å–æ–¹æ¡ˆ"><span class="toc-number">2.</span> <span class="toc-text">ç¡®å®šçˆ¬å–æ–¹æ¡ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#åˆ›å»ºqqzoneç±»"><span class="toc-number">2.1.</span> <span class="toc-text">åˆ›å»ºqqzoneç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ¨¡æ‹Ÿç™»å½•"><span class="toc-number">2.2.</span> <span class="toc-text">æ¨¡æ‹Ÿç™»å½•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è·å–-Cookies"><span class="toc-number">2.3.</span> <span class="toc-text">è·å– Cookies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è·å–-g-tk"><span class="toc-number">2.4.</span> <span class="toc-text">è·å– g_tk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#åˆå§‹åŒ–-request-Session"><span class="toc-number">2.5.</span> <span class="toc-text">åˆå§‹åŒ– request.Session</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¯·æ±‚ç›¸å†Œä¿¡æ¯"><span class="toc-number">2.6.</span> <span class="toc-text">è¯·æ±‚ç›¸å†Œä¿¡æ¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è§£æå¹¶ä¸‹è½½ç…§ç‰‡"><span class="toc-number">2.7.</span> <span class="toc-text">è§£æå¹¶ä¸‹è½½ç…§ç‰‡</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#çˆ¬å–æµ‹è¯•"><span class="toc-number">3.</span> <span class="toc-text">çˆ¬å–æµ‹è¯•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å†™åœ¨æœ€å"><span class="toc-number">4.</span> <span class="toc-text">å†™åœ¨æœ€å</span></a></li></ol></nav></aside></div><section class="p-ext"><div class="l-pager l-pager-dtl box"><a class="prev" href="/2019/03/12/commitizen/">&lt; git commit å·¥å…· - commitizen</a><a class="next" href="/2019/02/27/ipv6/">è®°ä¸€æ¬¡Clientæ— æ³•è·å–IPv6åœ°å€é—®é¢˜çš„åˆ†æè¿‡ç¨‹ &gt;</a></div><div id="valine-comment"><style type="text/css">.night .v[data-class=v] a { color: #0F9FB4 !important; }
.night .v[data-class=v] a:hover { color: #216C73 !important; }
.night .v[data-class=v] li { list-style: inherit; }
.night .v[data-class=v] .vwrap { border: 1px solid #223441; border-radius: 0; }
.night .v[data-class=v] .vwrap:hover { box-shadow: 0 0 6px 1px #223441; }
.night .v[data-class=v] .vbtn { border-radius: 0; background: none; }
.night .v[data-class=v] .vlist .vcard .vh { border-bottom-color: #293D4E; }
.night .v[data-class=v] .vwrap .vheader .vinput { border-bottom-color: #223441; }
.night .v[data-class=v] .vwrap .vheader .vinput:focus { border-bottom-color: #339EB4; }
.night .v[data-class=v] code, .night .v[data-class=v] pre,.night .v[data-class=v] .vlist .vcard .vhead .vsys { background: #203240 !important; }
.night .v[data-class=v] code, .night .v[data-class=v] pre { color: #F0F0F0; font-size: 95%; }
.v[data-class=v] .vcards .vcard .vh {border-bottom-color: #223441; }
.night .v[data-class=v] .vcards .vcard .vcontent.expand:before {background: linear-gradient(180deg,rgba(38,57,73,.4),rgba(38,57,73,.9));}
.night .v[data-class=v] .vcards .vcard .vcontent.expand:after {background: rgba(38,57,73,.9)}
</style><div id="vcomment"></div><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var notify = 'false' == true ? true : false;
var verify = 'false' == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;
window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'1ecKy4yk4u1R7C4tScKbnyq9-gzGzoHsz',
  appKey:'uvA3xgqNW3q8TGR483lxXcpB',
  lang: 'zh-cn',
  placeholder:'ãƒ¾ï¾‰â‰§âˆ€â‰¦)o Come on, say something...',
  avatar:'identicon',
  guest_info:guest_info,
  pageSize:'10'
})</script></div></section><footer><p>Copyright Â© 2016 - 2020 <a href="/." rel="nofollow">LITREILY</a> | <strong><a rel="nofollow" target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a></strong><br><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span></span> <span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span></span> | Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a>Theme with<a rel="nofollow" target="_blank" href="https://github.com/litreily/snark-hexo"> snark.</a></p></footer></div></div></div><script type="text/javascript" src="/plugins/prettify/prettify.js"></script><script type="text/javascript" src="/js/search.js"></script><script type="text/javascript" src="/js/top.js"></script><script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
    search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script></body></html>